<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: ActiveRecord::Base</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Class</strong></td>
          <td class="class-name-in-header">ActiveRecord::Base</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../../files/lib/active_record/base_rb.html">
                lib/active_record/base.rb
                </a>
        <br />
                <a href="../../files/lib/active_record/connection_adapters/abstract/connection_specification_rb.html">
                lib/active_record/connection_adapters/abstract/connection_specification.rb
                </a>
        <br />
                <a href="../../files/lib/active_record/connection_adapters/db2_adapter_rb.html">
                lib/active_record/connection_adapters/db2_adapter.rb
                </a>
        <br />
                <a href="../../files/lib/active_record/connection_adapters/frontbase_adapter_rb.html">
                lib/active_record/connection_adapters/frontbase_adapter.rb
                </a>
        <br />
                <a href="../../files/lib/active_record/connection_adapters/mysql_adapter_rb.html">
                lib/active_record/connection_adapters/mysql_adapter.rb
                </a>
        <br />
                <a href="../../files/lib/active_record/connection_adapters/openbase_adapter_rb.html">
                lib/active_record/connection_adapters/openbase_adapter.rb
                </a>
        <br />
                <a href="../../files/lib/active_record/connection_adapters/oracle_adapter_rb.html">
                lib/active_record/connection_adapters/oracle_adapter.rb
                </a>
        <br />
                <a href="../../files/lib/active_record/connection_adapters/postgresql_adapter_rb.html">
                lib/active_record/connection_adapters/postgresql_adapter.rb
                </a>
        <br />
                <a href="../../files/lib/active_record/connection_adapters/sqlite_adapter_rb.html">
                lib/active_record/connection_adapters/sqlite_adapter.rb
                </a>
        <br />
                <a href="../../files/lib/active_record/connection_adapters/sqlserver_adapter_rb.html">
                lib/active_record/connection_adapters/sqlserver_adapter.rb
                </a>
        <br />
                <a href="../../files/lib/active_record/connection_adapters/sybase_adapter_rb.html">
                lib/active_record/connection_adapters/sybase_adapter.rb
                </a>
        <br />
                <a href="../../files/lib/active_record/deprecated_finders_rb.html">
                lib/active_record/deprecated_finders.rb
                </a>
        <br />
                <a href="../../files/lib/active_record/query_cache_rb.html">
                lib/active_record/query_cache.rb
                </a>
        <br />
            </td>
        </tr>

        <tr class="top-aligned-row">
            <td><strong>Parent:</strong></td>
            <td>
                Object
            </td>
        </tr>
        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <p>
Active Record objects don&#8216;t specify their <a
href="Base.html#M000756">attributes</a> directly, but rather infer them
from the table definition with which they&#8216;re linked. Adding,
removing, and changing <a href="Base.html#M000756">attributes</a> and their
type is done directly in the database. Any change is instantly reflected in
the Active Record objects. The mapping that binds a given Active Record
class to a certain database table will happen automatically in most common
cases, but can be overwritten for the uncommon ones.
</p>
<p>
See the mapping rules in <a href="Base.html#M000709">table_name</a> and the
full example in <a href="../../files/README.html">files/README.html</a> for
more insight.
</p>
<h2>Creation</h2>
<p>
Active Records accept constructor parameters either in a <a
href="Base.html#M000764">hash</a> or as a block. The <a
href="Base.html#M000764">hash</a> method is especially useful when
you&#8216;re receiving the data from somewhere else, like a HTTP request.
It works like this:
</p>
<pre>
  user = User.new(:name =&gt; &quot;David&quot;, :occupation =&gt; &quot;Code Artist&quot;)
  user.name # =&gt; &quot;David&quot;
</pre>
<p>
You can also use block initialization:
</p>
<pre>
  user = User.new do |u|
    u.name = &quot;David&quot;
    u.occupation = &quot;Code Artist&quot;
  end
</pre>
<p>
And of course you can just <a href="Base.html#M000695">create</a> a bare
object and specify the <a href="Base.html#M000756">attributes</a> after the
fact:
</p>
<pre>
  user = User.new
  user.name = &quot;David&quot;
  user.occupation = &quot;Code Artist&quot;
</pre>
<h2>Conditions</h2>
<p>
Conditions can either be specified as a string, array, or <a
href="Base.html#M000764">hash</a> representing the WHERE-part of an SQL
statement. The array form is to be used when the condition input is tainted
and requires sanitization. The string form can be used for statements that
don&#8216;t involve tainted data. The <a href="Base.html#M000764">hash</a>
form works much like the array form, except only equality and range is
possible. Examples:
</p>
<pre>
  class User &lt; ActiveRecord::Base
    def self.authenticate_unsafely(user_name, password)
      find(:first, :conditions =&gt; &quot;user_name = '#{user_name}' AND password = '#{password}'&quot;)
    end

    def self.authenticate_safely(user_name, password)
      find(:first, :conditions =&gt; [ &quot;user_name = ? AND password = ?&quot;, user_name, password ])
    end

    def self.authenticate_safely_simply(user_name, password)
      find(:first, :conditions =&gt; { :user_name =&gt; user_name, :password =&gt; password })
    end
  end
</pre>
<p>
The <tt>authenticate_unsafely</tt> method inserts the parameters directly
into the query and is thus susceptible to SQL-injection attacks if the
<tt>user_name</tt> and <tt>password</tt> parameters come directly from a
HTTP request. The <tt>authenticate_safely</tt> and
<tt>authenticate_safely_simply</tt> both will sanitize the
<tt>user_name</tt> and <tt>password</tt> before inserting them in the
query, which will ensure that an attacker can&#8216;t escape the query and
fake the login (or worse).
</p>
<p>
When using multiple parameters in the conditions, it can easily become hard
to read exactly what the fourth or fifth question mark is supposed to
represent. In those cases, you can resort to named bind variables instead.
That&#8216;s done by replacing the question marks with symbols and
supplying a <a href="Base.html#M000764">hash</a> with values for the
matching symbol keys:
</p>
<pre>
  Company.find(:first, [
    &quot;id = :id AND name = :name AND division = :division AND created_at &gt; :accounting_date&quot;,
    { :id =&gt; 3, :name =&gt; &quot;37signals&quot;, :division =&gt; &quot;First&quot;, :accounting_date =&gt; '2005-01-01' }
  ])
</pre>
<p>
Similarly, a simple <a href="Base.html#M000764">hash</a> without a
statement will generate conditions based on equality with the SQL AND
operator. For instance:
</p>
<pre>
  Student.find(:all, :conditions =&gt; { :first_name =&gt; &quot;Harvey&quot;, :status =&gt; 1 })
  Student.find(:all, :conditions =&gt; params[:student])
</pre>
<p>
A range may be used in the <a href="Base.html#M000764">hash</a> to use the
SQL BETWEEN operator:
</p>
<pre>
  Student.find(:all, :conditions =&gt; { :grade =&gt; 9..12 })
</pre>
<h2>Overwriting default accessors</h2>
<p>
All column values are automatically available through basic accessors on
the Active Record object, but some times you want to specialize this
behavior. This can be done by either by overwriting the default accessors
(using the same name as the attribute) calling read_attribute(attr_name)
and write_attribute(attr_name, value) to actually change things. Example:
</p>
<pre>
  class Song &lt; ActiveRecord::Base
    # Uses an integer of seconds to hold the length of the song

    def length=(minutes)
      write_attribute(:length, minutes * 60)
    end

    def length
      read_attribute(:length) / 60
    end
  end
</pre>
<p>
You can alternatively use self[:attribute]=(value) and self[:attribute]
instead of write_attribute(:attribute, vaule) and
read_attribute(:attribute) as a shorter form.
</p>
<h2>Accessing <a href="Base.html#M000756">attributes</a> before they have been typecasted</h2>
<p>
Sometimes you want to be able to read the raw attribute data without having
the column-determined typecast run its course first. That can be done by
using the &lt;attribute&gt;_before_type_cast accessors that all <a
href="Base.html#M000756">attributes</a> have. For example, if your Account
model has a balance attribute, you can call
account.balance_before_type_cast or account.id_before_type_cast.
</p>
<p>
This is especially useful in validation situations where the user might
supply a string for an integer field and you want to display the original
string back in an error message. Accessing the attribute normally would
typecast the string to 0, which isn&#8216;t what you want.
</p>
<h2>Dynamic attribute-based finders</h2>
<p>
Dynamic attribute-based finders are a cleaner way of getting (and/or
creating) objects by simple queries without turning to SQL. They work by
appending the name of an attribute to <tt>find_by_</tt> or
<tt>find_all_by_</tt>, so you get finders like Person.find_by_user_name,
Person.find_all_by_last_name, Payment.find_by_transaction_id. So instead of
writing <tt>Person.find(:first, [&quot;user_name = ?&quot;,
user_name])</tt>, you just do <tt>Person.find_by_user_name(user_name)</tt>.
And instead of writing <tt>Person.find(:all, [&quot;last_name = ?&quot;,
last_name])</tt>, you just do
<tt>Person.find_all_by_last_name(last_name)</tt>.
</p>
<p>
It&#8216;s also possible to use multiple <a
href="Base.html#M000756">attributes</a> in the same <a
href="Base.html#M000692">find</a> by separating them with
&quot;<em>and</em>&quot;, so you get finders like
<tt>Person.find_by_user_name_and_password</tt> or even
<tt>Payment.find_by_purchaser_and_state_and_country</tt>. So instead of
writing <tt>Person.find(:first, [&quot;user_name = ? AND password =
?&quot;, user_name, password])</tt>, you just do
<tt>Person.find_by_user_name_and_password(user_name, password)</tt>.
</p>
<p>
It&#8216;s even possible to use all the additional parameters to <a
href="Base.html#M000692">find</a>. For example, the full interface for
Payment.find_all_by_amount is actually Payment.find_all_by_amount(amount,
options). And the full interface to Person.find_by_user_name is actually
Person.find_by_user_name(user_name, options). So you could call
<tt>Payment.find_all_by_amount(50, :order =&gt;
&quot;created_on&quot;)</tt>.
</p>
<p>
The same dynamic finder style can be used to <a
href="Base.html#M000695">create</a> the object if it doesn&#8216;t already
exist. This dynamic finder is called with <tt>find_or_create_by_</tt> and
will return the object if it already exists and otherwise creates it, then
returns it. Example:
</p>
<pre>
  # No 'Summer' tag exists
  Tag.find_or_create_by_name(&quot;Summer&quot;) # equal to Tag.create(:name =&gt; &quot;Summer&quot;)

  # Now the 'Summer' tag does exist
  Tag.find_or_create_by_name(&quot;Summer&quot;) # equal to Tag.find_by_name(&quot;Summer&quot;)
</pre>
<p>
Use the <tt>find_or_initialize_by_</tt> finder if you want to return a <a
href="Base.html#M000734">new</a> record without saving it first. Example:
</p>
<pre>
  # No 'Winter' tag exists
  winter = Tag.find_or_initialize_by_name(&quot;Winter&quot;)
  winter.new_record? # true
</pre>
<h2>Saving arrays, hashes, and other non-mappable objects in text <a href="Base.html#M000717">columns</a></h2>
<p>
Active Record can <a href="Base.html#M000707">serialize</a> any object in
text <a href="Base.html#M000717">columns</a> using YAML. To do so, you must
specify this with a call to the class method <tt><a
href="Base.html#M000707">serialize</a></tt>. This makes it possible to
store arrays, hashes, and other non-mappable objects without doing any
additional work. Example:
</p>
<pre>
  class User &lt; ActiveRecord::Base
    serialize :preferences
  end

  user = User.create(:preferences =&gt; { &quot;background&quot; =&gt; &quot;black&quot;, &quot;display&quot; =&gt; large })
  User.find(user.id).preferences # =&gt; { &quot;background&quot; =&gt; &quot;black&quot;, &quot;display&quot; =&gt; large }
</pre>
<p>
You can also specify a class option as the second parameter that&#8216;ll
raise an exception if a serialized object is retrieved as a descendent of a
class not in the hierarchy. Example:
</p>
<pre>
  class User &lt; ActiveRecord::Base
    serialize :preferences, Hash
  end

  user = User.create(:preferences =&gt; %w( one two three ))
  User.find(user.id).preferences    # raises SerializationTypeMismatch
</pre>
<h2>Single table inheritance</h2>
<p>
Active Record allows inheritance by storing the name of the class in a
column that by default is called &quot;type&quot; (can be changed by
overwriting <tt><a
href="Base.html#M000711">Base.inheritance_column</a></tt>). This means that
an inheritance looking like this:
</p>
<pre>
  class Company &lt; ActiveRecord::Base; end
  class Firm &lt; Company; end
  class Client &lt; Company; end
  class PriorityClient &lt; Client; end
</pre>
<p>
When you do Firm.create(:name =&gt; &quot;37signals&quot;), this record
will be saved in the companies table with type = &quot;Firm&quot;. You can
then fetch this row again using Company.find(:first, &quot;name =
&#8216;37signals&#8217;&quot;) and it will return a Firm object.
</p>
<p>
If you don&#8216;t have a type column defined in your table, single-table
inheritance won&#8216;t be triggered. In that case, it&#8216;ll work just
like normal subclasses with no special magic for differentiating between
them or reloading the right type with <a href="Base.html#M000692">find</a>.
</p>
<p>
Note, all the <a href="Base.html#M000756">attributes</a> for all the cases
are kept in the same table. Read more: <a
href="http://www.martinfowler.com/eaaCatalog/singleTableInheritance.html">www.martinfowler.com/eaaCatalog/singleTableInheritance.html</a>
</p>
<h2>Connection to multiple databases in different models</h2>
<p>
Connections are usually created through <a
href="Base.html#M000773">ActiveRecord::Base.establish_connection</a> and
retrieved by <a href="Base.html#M000769">ActiveRecord::Base.connection</a>.
All classes inheriting from <a href="Base.html">ActiveRecord::Base</a> will
use this <a href="Base.html#M000769">connection</a>. But you can also set a
class-specific <a href="Base.html#M000769">connection</a>. For example, if
Course is a <a href="Base.html">ActiveRecord::Base</a>, but resides in a
different database you can just say Course.establish_connection and Course
*and all its subclasses* will use this <a
href="Base.html#M000769">connection</a> instead.
</p>
<p>
This feature is implemented by keeping a <a
href="Base.html#M000769">connection</a> pool in <a
href="Base.html">ActiveRecord::Base</a> that is a Hash indexed by the
class. If a <a href="Base.html#M000769">connection</a> is requested, the
retrieve_connection method will go up the class-hierarchy until a <a
href="Base.html#M000769">connection</a> is found in the <a
href="Base.html#M000769">connection</a> pool.
</p>
<h2>Exceptions</h2>
<ul>
<li><tt>ActiveRecordError</tt> &#8212; generic error class and superclass of
all other errors raised by Active Record

</li>
<li><tt>AdapterNotSpecified</tt> &#8212; the configuration <a
href="Base.html#M000764">hash</a> used in <tt><a
href="Base.html#M000773">establish_connection</a></tt> didn&#8216;t include
a <tt>:adapter</tt> key.

</li>
<li><tt>AdapterNotFound</tt> &#8212; the <tt>:adapter</tt> key used in <tt><a
href="Base.html#M000773">establish_connection</a></tt> specified an
non-existent adapter (or a bad spelling of an existing one).

</li>
<li><tt>AssociationTypeMismatch</tt> &#8212; the object assigned to the
association wasn&#8216;t of the type specified in the association
definition.

</li>
<li><tt>SerializationTypeMismatch</tt> &#8212; the object serialized
wasn&#8216;t of the class specified as the second parameter.

</li>
<li><tt>ConnectionNotEstablished</tt> &#8212; no <a
href="Base.html#M000769">connection</a> has been established. Use <tt><a
href="Base.html#M000773">establish_connection</a></tt> before querying.

</li>
<li><tt>RecordNotFound</tt> &#8212; no record responded to the <a
href="Base.html#M000692">find</a>* method. Either the row with the given ID
doesn&#8216;t exist or the row didn&#8216;t meet the additional
restrictions.

</li>
<li><tt>StatementInvalid</tt> &#8212; the database server rejected the SQL
statement. The precise error is added in the message. Either the record
with the given ID doesn&#8216;t exist or the record didn&#8216;t meet the
additional restrictions.

</li>
<li><tt>MultiparameterAssignmentErrors</tt> &#8212; collection of errors that
occurred during a mass assignment using the +<a
href="Base.html#M000755">attributes=</a>+ method. The <tt>errors</tt>
property of this exception contains an array of
<tt>AttributeAssignmentError</tt> objects that should be inspected to
determine which <a href="Base.html#M000756">attributes</a> triggered the
errors.

</li>
<li><tt>AttributeAssignmentError</tt> &#8212; an error occurred while doing a
mass assignment through the +<a href="Base.html#M000755">attributes=</a>+
method. You can inspect the <tt>attribute</tt> property of the exception
object to determine which attribute triggered the error.

</li>
</ul>
<p>
<b>Note</b>: The <a href="Base.html#M000756">attributes</a> listed are
class-level <a href="Base.html#M000756">attributes</a> (accessible from
both the class and instance level). So it&#8216;s possible to assign a
logger to the class through Base.logger= which will then be used by all
instances in the current object space.
</p>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000762">==</a>&nbsp;&nbsp;
      <a href="#M000726">===</a>&nbsp;&nbsp;
      <a href="#M000753">[]</a>&nbsp;&nbsp;
      <a href="#M000754">[]=</a>&nbsp;&nbsp;
      <a href="#M000728">abstract_class?</a>&nbsp;&nbsp;
      <a href="#M000706">attr_accessible</a>&nbsp;&nbsp;
      <a href="#M000705">attr_protected</a>&nbsp;&nbsp;
      <a href="#M000760">attribute_names</a>&nbsp;&nbsp;
      <a href="#M000758">attribute_present?</a>&nbsp;&nbsp;
      <a href="#M000756">attributes</a>&nbsp;&nbsp;
      <a href="#M000755">attributes=</a>&nbsp;&nbsp;
      <a href="#M000757">attributes_before_type_cast</a>&nbsp;&nbsp;
      <a href="#M000727">base_class</a>&nbsp;&nbsp;
      <a href="#M000722">benchmark</a>&nbsp;&nbsp;
      <a href="#M000730">class_of_active_record_descendant</a>&nbsp;&nbsp;
      <a href="#M000770">clear_active_connections!</a>&nbsp;&nbsp;
      <a href="#M000771">clear_reloadable_connections!</a>&nbsp;&nbsp;
      <a href="#M000742">clone</a>&nbsp;&nbsp;
      <a href="#M000761">column_for_attribute</a>&nbsp;&nbsp;
      <a href="#M000719">column_names</a>&nbsp;&nbsp;
      <a href="#M000717">columns</a>&nbsp;&nbsp;
      <a href="#M000718">columns_hash</a>&nbsp;&nbsp;
      <a href="#M000729">compute_type</a>&nbsp;&nbsp;
      <a href="#M000774">connected?</a>&nbsp;&nbsp;
      <a href="#M000769">connection</a>&nbsp;&nbsp;
      <a href="#M000772">connection</a>&nbsp;&nbsp;
      <a href="#M000777">connection=</a>&nbsp;&nbsp;
      <a href="#M000720">content_columns</a>&nbsp;&nbsp;
      <a href="#M000702">count_by_sql</a>&nbsp;&nbsp;
      <a href="#M000695">create</a>&nbsp;&nbsp;
      <a href="#M000748">decrement</a>&nbsp;&nbsp;
      <a href="#M000749">decrement!</a>&nbsp;&nbsp;
      <a href="#M000704">decrement_counter</a>&nbsp;&nbsp;
      <a href="#M000697">delete</a>&nbsp;&nbsp;
      <a href="#M000701">delete_all</a>&nbsp;&nbsp;
      <a href="#M000698">destroy</a>&nbsp;&nbsp;
      <a href="#M000741">destroy</a>&nbsp;&nbsp;
      <a href="#M000700">destroy_all</a>&nbsp;&nbsp;
      <a href="#M000763">eql?</a>&nbsp;&nbsp;
      <a href="#M000773">establish_connection</a>&nbsp;&nbsp;
      <a href="#M000694">exists?</a>&nbsp;&nbsp;
      <a href="#M000692">find</a>&nbsp;&nbsp;
      <a href="#M000693">find_by_sql</a>&nbsp;&nbsp;
      <a href="#M000766">freeze</a>&nbsp;&nbsp;
      <a href="#M000767">frozen?</a>&nbsp;&nbsp;
      <a href="#M000759">has_attribute?</a>&nbsp;&nbsp;
      <a href="#M000764">hash</a>&nbsp;&nbsp;
      <a href="#M000735">id</a>&nbsp;&nbsp;
      <a href="#M000737">id=</a>&nbsp;&nbsp;
      <a href="#M000746">increment</a>&nbsp;&nbsp;
      <a href="#M000747">increment!</a>&nbsp;&nbsp;
      <a href="#M000703">increment_counter</a>&nbsp;&nbsp;
      <a href="#M000711">inheritance_column</a>&nbsp;&nbsp;
      <a href="#M000734">new</a>&nbsp;&nbsp;
      <a href="#M000738">new_record?</a>&nbsp;&nbsp;
      <a href="#M000710">primary_key</a>&nbsp;&nbsp;
      <a href="#M000768">readonly?</a>&nbsp;&nbsp;
      <a href="#M000752">reload</a>&nbsp;&nbsp;
      <a href="#M000775">remove_connection</a>&nbsp;&nbsp;
      <a href="#M000776">require_mysql</a>&nbsp;&nbsp;
      <a href="#M000721">reset_column_information</a>&nbsp;&nbsp;
      <a href="#M000765">respond_to?</a>&nbsp;&nbsp;
      <a href="#M000731">sanitize_sql</a>&nbsp;&nbsp;
      <a href="#M000733">sanitize_sql_array</a>&nbsp;&nbsp;
      <a href="#M000732">sanitize_sql_hash</a>&nbsp;&nbsp;
      <a href="#M000739">save</a>&nbsp;&nbsp;
      <a href="#M000740">save!</a>&nbsp;&nbsp;
      <a href="#M000707">serialize</a>&nbsp;&nbsp;
      <a href="#M000708">serialized_attributes</a>&nbsp;&nbsp;
      <a href="#M000714">set_inheritance_column</a>&nbsp;&nbsp;
      <a href="#M000713">set_primary_key</a>&nbsp;&nbsp;
      <a href="#M000715">set_sequence_name</a>&nbsp;&nbsp;
      <a href="#M000712">set_table_name</a>&nbsp;&nbsp;
      <a href="#M000723">silence</a>&nbsp;&nbsp;
      <a href="#M000716">table_exists?</a>&nbsp;&nbsp;
      <a href="#M000709">table_name</a>&nbsp;&nbsp;
      <a href="#M000736">to_param</a>&nbsp;&nbsp;
      <a href="#M000750">toggle</a>&nbsp;&nbsp;
      <a href="#M000751">toggle!</a>&nbsp;&nbsp;
      <a href="#M000696">update</a>&nbsp;&nbsp;
      <a href="#M000699">update_all</a>&nbsp;&nbsp;
      <a href="#M000743">update_attribute</a>&nbsp;&nbsp;
      <a href="#M000744">update_attributes</a>&nbsp;&nbsp;
      <a href="#M000745">update_attributes!</a>&nbsp;&nbsp;
      <a href="#M000725">with_exclusive_scope</a>&nbsp;&nbsp;
      <a href="#M000724">with_scope</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->
    <div id="includes">
      <h3 class="section-bar">Included Modules</h3>

      <div id="includes-list">
        <span class="include-name">Reloadable::Deprecated</span>
      </div>
    </div>

    <div id="section">


    <div id="constants-list">
      <h3 class="section-bar">Constants</h3>

      <div class="name-list">
        <table summary="Constants">
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">VALID_FIND_OPTIONS</td>
          <td>=</td>
          <td class="context-item-value">[ :conditions, :include, :joins, :limit, :offset,                                :order, :select, :readonly, :group, :from, :lock ]</td>
        </tr>
        </table>
      </div>
    </div>

    <div id="aliases-list">
      <h3 class="section-bar">External Aliases</h3>

      <div class="name-list">
                        <table summary="aliases">
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">set_table_name</td>
          <td>-&gt;</td>
          <td class="context-item-value">table_name=</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">set_primary_key</td>
          <td>-&gt;</td>
          <td class="context-item-value">primary_key=</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">set_inheritance_column</td>
          <td>-&gt;</td>
          <td class="context-item-value">inheritance_column=</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">set_sequence_name</td>
          <td>-&gt;</td>
          <td class="context-item-value">sequence_name=</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">sanitize_sql</td>
          <td>-&gt;</td>
          <td class="context-item-value">sanitize_conditions</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">respond_to?</td>
          <td>-&gt;</td>
          <td class="context-item-value">respond_to_without_attributes?</td>
        </tr>
      <tr class="top-aligned-row context-row">
        <td>&nbsp;</td>
        <td colspan="2" class="context-item-desc">
For checking <a href="Base.html#M000765">respond_to?</a> without searching
the <a href="Base.html#M000756">attributes</a> (which is faster).

</td>
      </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">connection=</td>
          <td>-&gt;</td>
          <td class="context-item-value">connection_without_query_cache=</td>
        </tr>
                        </table>
      </div>
    </div>


    <div id="attribute-list">
      <h3 class="section-bar">Attributes</h3>

      <div class="name-list">
        <table>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">abstract_class</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
Set this to true if this is an abstract class (see abstract_class?).

</td>
        </tr>
        </table>
      </div>
    </div>
      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Class methods</h3>

      <div id="method-M000726" class="method-detail">
        <a name="M000726"></a>

        <div class="method-heading">
          <a href="Base.src/M000726.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000726.html');return false;">
          <span class="method-name">===</span><span class="method-args">(object)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Overwrite the default class equality method to provide support for
association proxies.
</p>
        </div>
      </div>

      <div id="method-M000728" class="method-detail">
        <a name="M000728"></a>

        <div class="method-heading">
          <a href="Base.src/M000728.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000728.html');return false;">
          <span class="method-name">abstract_class?</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns whether this class is a base AR class. If A is a base class and B
descends from A, then B.base_class will return B.
</p>
        </div>
      </div>

      <div id="method-M000706" class="method-detail">
        <a name="M000706"></a>

        <div class="method-heading">
          <a href="Base.src/M000706.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000706.html');return false;">
          <span class="method-name">attr_accessible</span><span class="method-args">(*attributes)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
If this macro is used, only those <a
href="Base.html#M000756">attributes</a> named in it will be accessible for
mass-assignment, such as <tt><a href="Base.html#M000734">new</a>(<a
href="Base.html#M000756">attributes</a>)</tt> and <tt><a
href="Base.html#M000755">attributes=</a>(<a
href="Base.html#M000756">attributes</a>)</tt>. This is the more
conservative choice for mass-assignment protection. If you&#8216;d rather
start from an all-open default and restrict <a
href="Base.html#M000756">attributes</a> as needed, have a look at <a
href="Base.html#M000705">attr_protected</a>.
</p>
        </div>
      </div>

      <div id="method-M000705" class="method-detail">
        <a name="M000705"></a>

        <div class="method-heading">
          <a href="Base.src/M000705.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000705.html');return false;">
          <span class="method-name">attr_protected</span><span class="method-args">(*attributes)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Attributes named in this macro are protected from mass-assignment, such as
<tt><a href="Base.html#M000734">new</a>(<a
href="Base.html#M000756">attributes</a>)</tt> and <tt><a
href="Base.html#M000755">attributes=</a>(<a
href="Base.html#M000756">attributes</a>)</tt>. Their assignment will simply
be ignored. Instead, you can use the direct writer methods to do
assignment. This is meant to protect sensitive <a
href="Base.html#M000756">attributes</a> from being overwritten by URL/form
hackers. Example:
</p>
<pre>
  class Customer &lt; ActiveRecord::Base
    attr_protected :credit_rating
  end

  customer = Customer.new(&quot;name&quot; =&gt; David, &quot;credit_rating&quot; =&gt; &quot;Excellent&quot;)
  customer.credit_rating # =&gt; nil
  customer.attributes = { &quot;description&quot; =&gt; &quot;Jolly fellow&quot;, &quot;credit_rating&quot; =&gt; &quot;Superb&quot; }
  customer.credit_rating # =&gt; nil

  customer.credit_rating = &quot;Average&quot;
  customer.credit_rating # =&gt; &quot;Average&quot;
</pre>
        </div>
      </div>

      <div id="method-M000727" class="method-detail">
        <a name="M000727"></a>

        <div class="method-heading">
          <a href="Base.src/M000727.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000727.html');return false;">
          <span class="method-name">base_class</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the base AR subclass that this class descends from. If A extends
AR::Base, A.base_class will return A. If B descends from A through some
arbitrarily deep hierarchy, B.base_class will return A.
</p>
        </div>
      </div>

      <div id="method-M000722" class="method-detail">
        <a name="M000722"></a>

        <div class="method-heading">
          <a href="Base.src/M000722.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000722.html');return false;">
          <span class="method-name">benchmark</span><span class="method-args">(title, log_level = Logger::DEBUG, use_silence = true) {|| ...}</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Log and <a href="Base.html#M000722">benchmark</a> multiple statements in a
single block. Example:
</p>
<pre>
  Project.benchmark(&quot;Creating project&quot;) do
    project = Project.create(&quot;name&quot; =&gt; &quot;stuff&quot;)
    project.create_manager(&quot;name&quot; =&gt; &quot;David&quot;)
    project.milestones &lt;&lt; Milestone.find(:all)
  end
</pre>
<p>
The <a href="Base.html#M000722">benchmark</a> is only recorded if the
current level of the logger matches the <tt>log_level</tt>, which makes it
easy to include benchmarking statements in production software that will
remain inexpensive because the <a href="Base.html#M000722">benchmark</a>
will only be conducted if the log level is low enough.
</p>
<p>
The logging of the multiple statements is turned off unless
<tt>use_silence</tt> is set to false.
</p>
        </div>
      </div>

      <div id="method-M000770" class="method-detail">
        <a name="M000770"></a>

        <div class="method-heading">
          <a href="Base.src/M000770.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000770.html');return false;">
          <span class="method-name">clear_active_connections!</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Clears the cache which maps classes to connections.
</p>
        </div>
      </div>

      <div id="method-M000771" class="method-detail">
        <a name="M000771"></a>

        <div class="method-heading">
          <a href="Base.src/M000771.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000771.html');return false;">
          <span class="method-name">clear_reloadable_connections!</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Clears the cache which maps classes
</p>
        </div>
      </div>

      <div id="method-M000719" class="method-detail">
        <a name="M000719"></a>

        <div class="method-heading">
          <a href="Base.src/M000719.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000719.html');return false;">
          <span class="method-name">column_names</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns an array of column names as strings.
</p>
        </div>
      </div>

      <div id="method-M000717" class="method-detail">
        <a name="M000717"></a>

        <div class="method-heading">
          <a href="Base.src/M000717.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000717.html');return false;">
          <span class="method-name">columns</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns an array of column objects for the table associated with this
class.
</p>
        </div>
      </div>

      <div id="method-M000718" class="method-detail">
        <a name="M000718"></a>

        <div class="method-heading">
          <a href="Base.src/M000718.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000718.html');return false;">
          <span class="method-name">columns_hash</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns a <a href="Base.html#M000764">hash</a> of column objects for the
table associated with this class.
</p>
        </div>
      </div>

      <div id="method-M000774" class="method-detail">
        <a name="M000774"></a>

        <div class="method-heading">
          <a href="Base.src/M000774.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000774.html');return false;">
          <span class="method-name">connected?</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns true if a <a href="Base.html#M000769">connection</a> that&#8216;s
accessible to this class have already been opened.
</p>
        </div>
      </div>

      <div id="method-M000769" class="method-detail">
        <a name="M000769"></a>

        <div class="method-heading">
          <a href="Base.src/M000769.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000769.html');return false;">
          <span class="method-name">connection</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the <a href="Base.html#M000769">connection</a> currently associated
with the class. This can also be used to &quot;borrow&quot; the <a
href="Base.html#M000769">connection</a> to do database work unrelated to
any of the specific Active Records.
</p>
        </div>
      </div>

      <div id="method-M000777" class="method-detail">
        <a name="M000777"></a>

        <div class="method-heading">
          <a href="Base.src/M000777.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000777.html');return false;">
          <span class="method-name">connection=</span><span class="method-args">(spec)</span>
          </a>
        </div>
      
        <div class="method-description">
        </div>
      </div>

      <div id="method-M000720" class="method-detail">
        <a name="M000720"></a>

        <div class="method-heading">
          <a href="Base.src/M000720.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000720.html');return false;">
          <span class="method-name">content_columns</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns an array of column objects where the primary <a
href="Base.html#M000735">id</a>, all <a
href="Base.html#M000717">columns</a> ending in &quot;_id&quot; or
&quot;_count&quot;, and <a href="Base.html#M000717">columns</a> used for
single table inheritance have been removed.
</p>
        </div>
      </div>

      <div id="method-M000702" class="method-detail">
        <a name="M000702"></a>

        <div class="method-heading">
          <a href="Base.src/M000702.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000702.html');return false;">
          <span class="method-name">count_by_sql</span><span class="method-args">(sql)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the result of an SQL statement that should only include a COUNT(*)
in the SELECT part.
</p>
<pre>
  Product.count_by_sql &quot;SELECT COUNT(*) FROM sales s, customers c WHERE s.customer_id = c.id&quot;
</pre>
        </div>
      </div>

      <div id="method-M000695" class="method-detail">
        <a name="M000695"></a>

        <div class="method-heading">
          <a href="Base.src/M000695.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000695.html');return false;">
          <span class="method-name">create</span><span class="method-args">(attributes = nil)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Creates an object, instantly saves it as a record (if the validation
permits it), and returns it. If the <a href="Base.html#M000739">save</a>
fails under validations, the unsaved object is still returned.
</p>
        </div>
      </div>

      <div id="method-M000704" class="method-detail">
        <a name="M000704"></a>

        <div class="method-heading">
          <a href="Base.src/M000704.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000704.html');return false;">
          <span class="method-name">decrement_counter</span><span class="method-args">(counter_name, id)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Works like <a href="Base.html#M000703">increment_counter</a>, but
decrements instead.
</p>
        </div>
      </div>

      <div id="method-M000697" class="method-detail">
        <a name="M000697"></a>

        <div class="method-heading">
          <a href="Base.src/M000697.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000697.html');return false;">
          <span class="method-name">delete</span><span class="method-args">(id)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Deletes the record with the given <tt><a
href="Base.html#M000735">id</a></tt> without instantiating an object first.
If an array of ids is provided, all of them are deleted.
</p>
        </div>
      </div>

      <div id="method-M000701" class="method-detail">
        <a name="M000701"></a>

        <div class="method-heading">
          <a href="Base.src/M000701.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000701.html');return false;">
          <span class="method-name">delete_all</span><span class="method-args">(conditions = nil)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Deletes all the records that match the <tt>condition</tt> without
instantiating the objects first (and hence not calling the <a
href="Base.html#M000698">destroy</a> method). Example:
</p>
<pre>
  Post.delete_all &quot;person_id = 5 AND (category = 'Something' OR category = 'Else')&quot;
</pre>
        </div>
      </div>

      <div id="method-M000698" class="method-detail">
        <a name="M000698"></a>

        <div class="method-heading">
          <a href="Base.src/M000698.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000698.html');return false;">
          <span class="method-name">destroy</span><span class="method-args">(id)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Destroys the record with the given <tt><a
href="Base.html#M000735">id</a></tt> by instantiating the object and
calling <a href="Base.html#M000698">destroy</a> (all the callbacks are the
triggered). If an array of ids is provided, all of them are destroyed.
</p>
        </div>
      </div>

      <div id="method-M000700" class="method-detail">
        <a name="M000700"></a>

        <div class="method-heading">
          <a href="Base.src/M000700.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000700.html');return false;">
          <span class="method-name">destroy_all</span><span class="method-args">(conditions = nil)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Destroys the objects for all the records that match the <tt>condition</tt>
by instantiating each object and calling the <a
href="Base.html#M000698">destroy</a> method. Example:
</p>
<pre>
  Person.destroy_all &quot;last_login &lt; '2004-04-04'&quot;
</pre>
        </div>
      </div>

      <div id="method-M000773" class="method-detail">
        <a name="M000773"></a>

        <div class="method-heading">
          <a href="Base.src/M000773.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000773.html');return false;">
          <span class="method-name">establish_connection</span><span class="method-args">(spec = nil)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Establishes the <a href="Base.html#M000769">connection</a> to the database.
Accepts a <a href="Base.html#M000764">hash</a> as input where the :adapter
key must be specified with the name of a database adapter (in lower-case)
example for regular databases (MySQL, Postgresql, etc):
</p>
<pre>
  ActiveRecord::Base.establish_connection(
    :adapter  =&gt; &quot;mysql&quot;,
    :host     =&gt; &quot;localhost&quot;,
    :username =&gt; &quot;myuser&quot;,
    :password =&gt; &quot;mypass&quot;,
    :database =&gt; &quot;somedatabase&quot;
  )
</pre>
<p>
Example for SQLite database:
</p>
<pre>
  ActiveRecord::Base.establish_connection(
    :adapter =&gt; &quot;sqlite&quot;,
    :database  =&gt; &quot;path/to/dbfile&quot;
  )
</pre>
<p>
Also accepts keys as strings (for parsing from yaml for example):
</p>
<pre>
  ActiveRecord::Base.establish_connection(
    &quot;adapter&quot; =&gt; &quot;sqlite&quot;,
    &quot;database&quot;  =&gt; &quot;path/to/dbfile&quot;
  )
</pre>
<p>
The exceptions AdapterNotSpecified, AdapterNotFound and ArgumentError may
be returned on an error.
</p>
        </div>
      </div>

      <div id="method-M000694" class="method-detail">
        <a name="M000694"></a>

        <div class="method-heading">
          <a href="Base.src/M000694.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000694.html');return false;">
          <span class="method-name">exists?</span><span class="method-args">(id_or_conditions)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns true if the given <tt><a href="Base.html#M000735">id</a></tt>
represents the primary key of a record in the database, false otherwise.
You can also pass a set of SQL conditions. Example:
</p>
<pre>
  Person.exists?(5)
  Person.exists?('5')
  Person.exists?(:name =&gt; &quot;David&quot;)
  Person.exists?(['name LIKE ?', &quot;%#{query}%&quot;])
</pre>
        </div>
      </div>

      <div id="method-M000692" class="method-detail">
        <a name="M000692"></a>

        <div class="method-heading">
          <a href="Base.src/M000692.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000692.html');return false;">
          <span class="method-name">find</span><span class="method-args">(*args)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Find operates with three different retrieval approaches:
</p>
<ul>
<li>Find by <a href="Base.html#M000735">id</a>: This can either be a specific
<a href="Base.html#M000735">id</a> (1), a list of ids (1, 5, 6), or an
array of ids ([5, 6, 10]). If no record can be found for all of the listed
ids, then RecordNotFound will be raised.

</li>
<li>Find first: This will return the first record matched by the options used.
These options can either be specific conditions or merely an order. If no
record can matched, nil is returned.

</li>
<li>Find all: This will return all the records matched by the options used. If
no records are found, an empty array is returned.

</li>
</ul>
<p>
All approaches accept an option <a href="Base.html#M000764">hash</a> as
their last parameter. The options are:
</p>
<ul>
<li><tt>:conditions</tt>: An SQL fragment like &quot;administrator = 1&quot; or
[ &quot;user_name = ?&quot;, username ]. See conditions in the intro.

</li>
<li><tt>:order</tt>: An SQL fragment like &quot;created_at DESC, name&quot;.

</li>
<li><tt>:group</tt>: An attribute name by which the result should be grouped.
Uses the GROUP BY SQL-clause.

</li>
<li><tt>:limit</tt>: An integer determining the limit on the number of rows
that should be returned.

</li>
<li><tt>:offset</tt>: An integer determining the offset from where the rows
should be fetched. So at 5, it would skip the first 4 rows.

</li>
<li><tt>:joins</tt>: An SQL fragment for additional joins like &quot;LEFT JOIN
comments ON comments.post_id = <a href="Base.html#M000735">id</a>&quot;.
(Rarely needed). The records will be returned read-only since they will
have <a href="Base.html#M000756">attributes</a> that do not correspond to
the table&#8216;s <a href="Base.html#M000717">columns</a>. Pass :readonly
=&gt; false to override.

</li>
<li><tt>:include</tt>: Names associations that should be loaded alongside using
LEFT OUTER JOINs. The symbols named refer to already defined associations.
See eager loading under Associations.

</li>
<li><tt>:select</tt>: By default, this is * as in SELECT * FROM, but can be
changed if you for example want to do a join, but not include the joined <a
href="Base.html#M000717">columns</a>.

</li>
<li><tt>:from</tt>: By default, this is the table name of the class, but can be
changed to an alternate table name (or even the name of a database view).

</li>
<li><tt>:readonly</tt>: Mark the returned records read-only so they cannot be
saved or updated.

</li>
<li><tt>:lock</tt>: An SQL fragment like &quot;FOR UPDATE&quot; or &quot;LOCK
IN SHARE MODE&quot;. :lock =&gt; true gives <a
href="Base.html#M000769">connection</a>&#8216;s default exclusive lock,
usually &quot;FOR UPDATE&quot;.

</li>
</ul>
<p>
Examples for <a href="Base.html#M000692">find</a> by <a
href="Base.html#M000735">id</a>:
</p>
<pre>
  Person.find(1)       # returns the object for ID = 1
  Person.find(1, 2, 6) # returns an array for objects with IDs in (1, 2, 6)
  Person.find([7, 17]) # returns an array for objects with IDs in (7, 17)
  Person.find([1])     # returns an array for objects the object with ID = 1
  Person.find(1, :conditions =&gt; &quot;administrator = 1&quot;, :order =&gt; &quot;created_on DESC&quot;)
</pre>
<p>
Examples for <a href="Base.html#M000692">find</a> first:
</p>
<pre>
  Person.find(:first) # returns the first object fetched by SELECT * FROM people
  Person.find(:first, :conditions =&gt; [ &quot;user_name = ?&quot;, user_name])
  Person.find(:first, :order =&gt; &quot;created_on DESC&quot;, :offset =&gt; 5)
</pre>
<p>
Examples for <a href="Base.html#M000692">find</a> all:
</p>
<pre>
  Person.find(:all) # returns an array of objects for all the rows fetched by SELECT * FROM people
  Person.find(:all, :conditions =&gt; [ &quot;category IN (?)&quot;, categories], :limit =&gt; 50)
  Person.find(:all, :offset =&gt; 10, :limit =&gt; 10)
  Person.find(:all, :include =&gt; [ :account, :friends ])
  Person.find(:all, :group =&gt; &quot;category&quot;)
</pre>
<p>
Example for <a href="Base.html#M000692">find</a> with a lock. Imagine two
concurrent transactions: each will read person.visits == 2, add 1 to it,
and <a href="Base.html#M000739">save</a>, resulting in two saves of
person.visits = 3. By locking the row, the second transaction has to wait
until the first is finished; we get the expected person.visits == 4.
</p>
<pre>
  Person.transaction do
    person = Person.find(1, :lock =&gt; true)
    person.visits += 1
    person.save!
  end
</pre>
        </div>
      </div>

      <div id="method-M000693" class="method-detail">
        <a name="M000693"></a>

        <div class="method-heading">
          <a href="Base.src/M000693.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000693.html');return false;">
          <span class="method-name">find_by_sql</span><span class="method-args">(sql)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Works like <a href="Base.html#M000692">find</a>(:all), but requires a
complete SQL string. Examples:
</p>
<pre>
  Post.find_by_sql &quot;SELECT p.*, c.author FROM posts p, comments c WHERE p.id = c.post_id&quot;
  Post.find_by_sql [&quot;SELECT * FROM posts WHERE author = ? AND created &gt; ?&quot;, author_id, start_date]
</pre>
        </div>
      </div>

      <div id="method-M000703" class="method-detail">
        <a name="M000703"></a>

        <div class="method-heading">
          <a href="Base.src/M000703.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000703.html');return false;">
          <span class="method-name">increment_counter</span><span class="method-args">(counter_name, id)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Increments the specified counter by one. So
<tt>DiscussionBoard.increment_counter(&quot;post_count&quot;,
discussion_board_id)</tt> would <a href="Base.html#M000746">increment</a>
the &quot;post_count&quot; counter on the board responding to
discussion_board_id. This is used for caching aggregate values, so that
they don&#8216;t need to be computed every time. Especially important for
looping over a collection where each element require a number of aggregate
values. Like the DiscussionBoard that needs to list both the number of
posts and comments.
</p>
        </div>
      </div>

      <div id="method-M000711" class="method-detail">
        <a name="M000711"></a>

        <div class="method-heading">
          <a href="Base.src/M000711.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000711.html');return false;">
          <span class="method-name">inheritance_column</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Defines the column name for use with single table inheritance &#8212; can
be set in subclasses like so: self.inheritance_column = &quot;type_id&quot;
</p>
        </div>
      </div>

      <div id="method-M000734" class="method-detail">
        <a name="M000734"></a>

        <div class="method-heading">
          <a href="Base.src/M000734.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000734.html');return false;">
          <span class="method-name">new</span><span class="method-args">(attributes = nil) {|self if block_given?| ...}</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
New objects can be instantiated as either empty (pass no construction
parameter) or pre-set with <a href="Base.html#M000756">attributes</a> but
not yet saved (pass a <a href="Base.html#M000764">hash</a> with key names
matching the associated table column names). In both instances, valid
attribute keys are determined by the column names of the associated table
&#8212; hence you can&#8216;t have <a
href="Base.html#M000756">attributes</a> that aren&#8216;t part of the table
<a href="Base.html#M000717">columns</a>.
</p>
        </div>
      </div>

      <div id="method-M000710" class="method-detail">
        <a name="M000710"></a>

        <div class="method-heading">
          <a href="Base.src/M000710.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000710.html');return false;">
          <span class="method-name">primary_key</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Defines the primary key field &#8212; can be overridden in subclasses.
Overwriting will negate any effect of the primary_key_prefix_type setting,
though.
</p>
        </div>
      </div>

      <div id="method-M000775" class="method-detail">
        <a name="M000775"></a>

        <div class="method-heading">
          <a href="Base.src/M000775.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000775.html');return false;">
          <span class="method-name">remove_connection</span><span class="method-args">(klass=self)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Remove the <a href="Base.html#M000769">connection</a> for this class. This
will close the active <a href="Base.html#M000769">connection</a> and the
defined <a href="Base.html#M000769">connection</a> (if they exist). The
result can be used as argument for <a
href="Base.html#M000773">establish_connection</a>, for easy re-establishing
of the <a href="Base.html#M000769">connection</a>.
</p>
        </div>
      </div>

      <div id="method-M000776" class="method-detail">
        <a name="M000776"></a>

        <div class="method-heading">
          <a href="Base.src/M000776.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000776.html');return false;">
          <span class="method-name">require_mysql</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
        </div>
      </div>

      <div id="method-M000721" class="method-detail">
        <a name="M000721"></a>

        <div class="method-heading">
          <a href="Base.src/M000721.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000721.html');return false;">
          <span class="method-name">reset_column_information</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Resets all the cached information about <a
href="Base.html#M000717">columns</a>, which will cause them to be reloaded
on the next request.
</p>
        </div>
      </div>

      <div id="method-M000707" class="method-detail">
        <a name="M000707"></a>

        <div class="method-heading">
          <a href="Base.src/M000707.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000707.html');return false;">
          <span class="method-name">serialize</span><span class="method-args">(attr_name, class_name = Object)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Specifies that the attribute by the name of <tt>attr_name</tt> should be
serialized before saving to the database and unserialized after loading
from the database. The serialization is done through YAML. If
<tt>class_name</tt> is specified, the serialized object must be of that
class on retrieval or <tt>SerializationTypeMismatch</tt> will be raised.
</p>
        </div>
      </div>

      <div id="method-M000708" class="method-detail">
        <a name="M000708"></a>

        <div class="method-heading">
          <a href="Base.src/M000708.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000708.html');return false;">
          <span class="method-name">serialized_attributes</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns a <a href="Base.html#M000764">hash</a> of all the <a
href="Base.html#M000756">attributes</a> that have been specified for
serialization as keys and their class restriction as values.
</p>
        </div>
      </div>

      <div id="method-M000714" class="method-detail">
        <a name="M000714"></a>

        <div class="method-heading">
          <a href="Base.src/M000714.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000714.html');return false;">
          <span class="method-name">set_inheritance_column</span><span class="method-args">(value = nil, &amp;block)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Sets the name of the inheritance column to use to the given value, or (if
the value # is nil or false) to the value returned by the given block.
</p>
<p>
Example:
</p>
<pre>
  class Project &lt; ActiveRecord::Base
    set_inheritance_column do
      original_inheritance_column + &quot;_id&quot;
    end
  end
</pre>
        </div>
      </div>

      <div id="method-M000713" class="method-detail">
        <a name="M000713"></a>

        <div class="method-heading">
          <a href="Base.src/M000713.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000713.html');return false;">
          <span class="method-name">set_primary_key</span><span class="method-args">(value = nil, &amp;block)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Sets the name of the primary key column to use to the given value, or (if
the value is nil or false) to the value returned by the given block.
</p>
<p>
Example:
</p>
<pre>
  class Project &lt; ActiveRecord::Base
    set_primary_key &quot;sysid&quot;
  end
</pre>
        </div>
      </div>

      <div id="method-M000715" class="method-detail">
        <a name="M000715"></a>

        <div class="method-heading">
          <a href="Base.src/M000715.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000715.html');return false;">
          <span class="method-name">set_sequence_name</span><span class="method-args">(value = nil, &amp;block)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Sets the name of the sequence to use when generating ids to the given
value, or (if the value is nil or false) to the value returned by the given
block. This is required for Oracle and is useful for any database which
relies on sequences for primary key generation.
</p>
<p>
If a sequence name is not explicitly set when using Oracle or Firebird, it
will default to the commonly used pattern of: #{<a
href="Base.html#M000709">table_name</a>}_seq
</p>
<p>
If a sequence name is not explicitly set when using PostgreSQL, it will
discover the sequence corresponding to your primary key for you.
</p>
<p>
Example:
</p>
<pre>
  class Project &lt; ActiveRecord::Base
    set_sequence_name &quot;projectseq&quot;   # default would have been &quot;project_seq&quot;
  end
</pre>
        </div>
      </div>

      <div id="method-M000712" class="method-detail">
        <a name="M000712"></a>

        <div class="method-heading">
          <a href="Base.src/M000712.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000712.html');return false;">
          <span class="method-name">set_table_name</span><span class="method-args">(value = nil, &amp;block)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Sets the table name to use to the given value, or (if the value is nil or
false) to the value returned by the given block.
</p>
<p>
Example:
</p>
<pre>
  class Project &lt; ActiveRecord::Base
    set_table_name &quot;project&quot;
  end
</pre>
        </div>
      </div>

      <div id="method-M000723" class="method-detail">
        <a name="M000723"></a>

        <div class="method-heading">
          <a href="Base.src/M000723.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000723.html');return false;">
          <span class="method-name">silence</span><span class="method-args">() {|| ...}</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Silences the logger for the duration of the block.
</p>
        </div>
      </div>

      <div id="method-M000716" class="method-detail">
        <a name="M000716"></a>

        <div class="method-heading">
          <a href="Base.src/M000716.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000716.html');return false;">
          <span class="method-name">table_exists?</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Indicates whether the table associated with this class exists
</p>
        </div>
      </div>

      <div id="method-M000709" class="method-detail">
        <a name="M000709"></a>

        <div class="method-heading">
          <a href="Base.src/M000709.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000709.html');return false;">
          <span class="method-name">table_name</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Guesses the table name (in forced lower-case) based on the name of the
class in the inheritance hierarchy descending directly from ActiveRecord.
So if the hierarchy looks like: Reply &lt; Message &lt; ActiveRecord, then
Message is used to guess the table name from even when called on Reply. The
rules used to do the guess are handled by the Inflector class in Active
Support, which knows almost all common English inflections (report a bug if
your inflection isn&#8216;t covered).
</p>
<p>
Nested classes are given table names prefixed by the singular form of the
parent&#8216;s table name. Example:
</p>
<pre>
  file                  class               table_name
  invoice.rb            Invoice             invoices
  invoice/lineitem.rb   Invoice::Lineitem   invoice_lineitems
</pre>
<p>
Additionally, the class-level table_name_prefix is prepended and the
table_name_suffix is appended. So if you have &quot;myapp_&quot; as a
prefix, the table name guess for an Invoice class becomes
&quot;myapp_invoices&quot;. Invoice::Lineitem becomes
&quot;myapp_invoice_lineitems&quot;.
</p>
<p>
You can also overwrite this class method to allow for unguessable links,
such as a Mouse class with a link to a &quot;mice&quot; table. Example:
</p>
<pre>
  class Mouse &lt; ActiveRecord::Base
    set_table_name &quot;mice&quot;
  end
</pre>
        </div>
      </div>

      <div id="method-M000696" class="method-detail">
        <a name="M000696"></a>

        <div class="method-heading">
          <a href="Base.src/M000696.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000696.html');return false;">
          <span class="method-name">update</span><span class="method-args">(id, attributes)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Finds the record from the passed <tt><a
href="Base.html#M000735">id</a></tt>, instantly saves it with the passed
<tt><a href="Base.html#M000756">attributes</a></tt> (if the validation
permits it), and returns it. If the <a href="Base.html#M000739">save</a>
fails under validations, the unsaved object is still returned.
</p>
<p>
The arguments may also be given as arrays in which case the <a
href="Base.html#M000696">update</a> method is called for each pair of
<tt><a href="Base.html#M000735">id</a></tt> and <tt><a
href="Base.html#M000756">attributes</a></tt> and an array of objects is
returned.
</p>
<p>
Example of updating one record:
</p>
<pre>
  Person.update(15, {:user_name =&gt; 'Samuel', :group =&gt; 'expert'})
</pre>
<p>
Example of updating multiple records:
</p>
<pre>
  people = { 1 =&gt; { &quot;first_name&quot; =&gt; &quot;David&quot; }, 2 =&gt; { &quot;first_name&quot; =&gt; &quot;Jeremy&quot;} }
  Person.update(people.keys, people.values)
</pre>
        </div>
      </div>

      <div id="method-M000699" class="method-detail">
        <a name="M000699"></a>

        <div class="method-heading">
          <a href="Base.src/M000699.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000699.html');return false;">
          <span class="method-name">update_all</span><span class="method-args">(updates, conditions = nil)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Updates all records with the SET-part of an SQL <a
href="Base.html#M000696">update</a> statement in <tt>updates</tt> and
returns an integer with the number of rows updated. A subset of the records
can be selected by specifying <tt>conditions</tt>. Example:
</p>
<pre>
  Billing.update_all &quot;category = 'authorized', approved = 1&quot;, &quot;author = 'David'&quot;
</pre>
        </div>
      </div>

      <div id="method-M000725" class="method-detail">
        <a name="M000725"></a>

        <div class="method-heading">
          <a href="Base.src/M000725.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000725.html');return false;">
          <span class="method-name">with_exclusive_scope</span><span class="method-args">(method_scoping = {}, &amp;block)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Works like <a href="Base.html#M000724">with_scope</a>, but discards any
nested properties.
</p>
        </div>
      </div>

      <div id="method-M000724" class="method-detail">
        <a name="M000724"></a>

        <div class="method-heading">
          <a href="Base.src/M000724.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000724.html');return false;">
          <span class="method-name">with_scope</span><span class="method-args">(method_scoping = {}, action = :merge) {|| ...}</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Scope parameters to method calls within the block. Takes a <a
href="Base.html#M000764">hash</a> of method_name =&gt; parameters <a
href="Base.html#M000764">hash</a>. method_name may be :<a
href="Base.html#M000692">find</a> or :<a
href="Base.html#M000695">create</a>. :<a href="Base.html#M000692">find</a>
parameters may include the <tt>:conditions</tt>, <tt>:joins</tt>,
<tt>:include</tt>, <tt>:offset</tt>, <tt>:limit</tt>, and
<tt>:readonly</tt> options. :<a href="Base.html#M000695">create</a>
parameters are an <a href="Base.html#M000756">attributes</a> <a
href="Base.html#M000764">hash</a>.
</p>
<pre>
  Article.with_scope(:find =&gt; { :conditions =&gt; &quot;blog_id = 1&quot; }, :create =&gt; { :blog_id =&gt; 1 }) do
    Article.find(1) # =&gt; SELECT * from articles WHERE blog_id = 1 AND id = 1
    a = Article.create(1)
    a.blog_id # =&gt; 1
  end
</pre>
<p>
In nested scopings, all previous parameters are overwritten by inner rule
except :conditions in :<a href="Base.html#M000692">find</a>, that are
merged as <a href="Base.html#M000764">hash</a>.
</p>
<pre>
  Article.with_scope(:find =&gt; { :conditions =&gt; &quot;blog_id = 1&quot;, :limit =&gt; 1 }, :create =&gt; { :blog_id =&gt; 1 }) do
    Article.with_scope(:find =&gt; { :limit =&gt; 10})
      Article.find(:all) # =&gt; SELECT * from articles WHERE blog_id = 1 LIMIT 10
    end
    Article.with_scope(:find =&gt; { :conditions =&gt; &quot;author_id = 3&quot; })
      Article.find(:all) # =&gt; SELECT * from articles WHERE blog_id = 1 AND author_id = 3 LIMIT 1
    end
  end
</pre>
<p>
You can ignore any previous scopings by using <tt><a
href="Base.html#M000725">with_exclusive_scope</a></tt> method.
</p>
<pre>
  Article.with_scope(:find =&gt; { :conditions =&gt; &quot;blog_id = 1&quot;, :limit =&gt; 1 }) do
    Article.with_exclusive_scope(:find =&gt; { :limit =&gt; 10 })
      Article.find(:all) # =&gt; SELECT * from articles LIMIT 10
    end
  end
</pre>
        </div>
      </div>

      <h3 class="section-bar">Protected Class methods</h3>

      <div id="method-M000730" class="method-detail">
        <a name="M000730"></a>

        <div class="method-heading">
          <a href="Base.src/M000730.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000730.html');return false;">
          <span class="method-name">class_of_active_record_descendant</span><span class="method-args">(klass)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the class descending directly from ActiveRecord in the inheritance
hierarchy.
</p>
        </div>
      </div>

      <div id="method-M000729" class="method-detail">
        <a name="M000729"></a>

        <div class="method-heading">
          <a href="Base.src/M000729.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000729.html');return false;">
          <span class="method-name">compute_type</span><span class="method-args">(type_name)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the class type of the record using the current module as a prefix.
So descendents of MyApp::Business::Account would appear as
MyApp::Business::AccountSubclass.
</p>
        </div>
      </div>

      <div id="method-M000731" class="method-detail">
        <a name="M000731"></a>

        <div class="method-heading">
          <a href="Base.src/M000731.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000731.html');return false;">
          <span class="method-name">sanitize_sql</span><span class="method-args">(condition)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Accepts an array, <a href="Base.html#M000764">hash</a>, or string of sql
conditions and sanitizes them into a valid SQL fragment.
</p>
<pre>
  [&quot;name='%s' and group_id='%s'&quot;, &quot;foo'bar&quot;, 4]  returns  &quot;name='foo''bar' and group_id='4'&quot;
  { :name =&gt; &quot;foo'bar&quot;, :group_id =&gt; 4 }  returns &quot;name='foo''bar' and group_id='4'&quot;
  &quot;name='foo''bar' and group_id='4'&quot; returns &quot;name='foo''bar' and group_id='4'&quot;
</pre>
        </div>
      </div>

      <div id="method-M000733" class="method-detail">
        <a name="M000733"></a>

        <div class="method-heading">
          <a href="Base.src/M000733.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000733.html');return false;">
          <span class="method-name">sanitize_sql_array</span><span class="method-args">(ary)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Accepts an array of conditions. The array has each value sanitized and
interpolated into the sql statement.
</p>
<pre>
  [&quot;name='%s' and group_id='%s'&quot;, &quot;foo'bar&quot;, 4]  returns  &quot;name='foo''bar' and group_id='4'&quot;
</pre>
        </div>
      </div>

      <div id="method-M000732" class="method-detail">
        <a name="M000732"></a>

        <div class="method-heading">
          <a href="Base.src/M000732.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000732.html');return false;">
          <span class="method-name">sanitize_sql_hash</span><span class="method-args">(attrs)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Sanitizes a <a href="Base.html#M000764">hash</a> of attribute/value pairs
into SQL conditions.
</p>
<pre>
  { :name =&gt; &quot;foo'bar&quot;, :group_id =&gt; 4 }
    # =&gt; &quot;name='foo''bar' and group_id= 4&quot;
  { :status =&gt; nil, :group_id =&gt; [1,2,3] }
    # =&gt; &quot;status IS NULL and group_id IN (1,2,3)&quot;
  { :age =&gt; 13..18 }
    # =&gt; &quot;age BETWEEN 13 AND 18&quot;
</pre>
        </div>
      </div>

      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000762" class="method-detail">
        <a name="M000762"></a>

        <div class="method-heading">
          <a href="Base.src/M000762.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000762.html');return false;">
          <span class="method-name">==</span><span class="method-args">(comparison_object)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns true if the <tt>comparison_object</tt> is the same object, or is of
the same type and has the same <a href="Base.html#M000735">id</a>.
</p>
        </div>
      </div>

      <div id="method-M000753" class="method-detail">
        <a name="M000753"></a>

        <div class="method-heading">
          <a href="Base.src/M000753.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000753.html');return false;">
          <span class="method-name">[]</span><span class="method-args">(attr_name)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the value of the attribute identified by <tt>attr_name</tt> after
it has been typecast (for example, &quot;2004-12-12&quot; in a data column
is cast to a date object, like Date.new(2004, 12, 12)). (Alias for the
protected read_attribute method).
</p>
        </div>
      </div>

      <div id="method-M000754" class="method-detail">
        <a name="M000754"></a>

        <div class="method-heading">
          <a href="Base.src/M000754.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000754.html');return false;">
          <span class="method-name">[]=</span><span class="method-args">(attr_name, value)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Updates the attribute identified by <tt>attr_name</tt> with the specified
<tt>value</tt>. (Alias for the protected write_attribute method).
</p>
        </div>
      </div>

      <div id="method-M000760" class="method-detail">
        <a name="M000760"></a>

        <div class="method-heading">
          <a href="Base.src/M000760.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000760.html');return false;">
          <span class="method-name">attribute_names</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns an array of names for the <a
href="Base.html#M000756">attributes</a> available on this object sorted
alphabetically.
</p>
        </div>
      </div>

      <div id="method-M000758" class="method-detail">
        <a name="M000758"></a>

        <div class="method-heading">
          <a href="Base.src/M000758.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000758.html');return false;">
          <span class="method-name">attribute_present?</span><span class="method-args">(attribute)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns true if the specified <tt>attribute</tt> has been set by the user
or by a database load and is neither nil nor empty? (the latter only
applies to objects that respond to empty?, most notably Strings).
</p>
        </div>
      </div>

      <div id="method-M000756" class="method-detail">
        <a name="M000756"></a>

        <div class="method-heading">
          <a href="Base.src/M000756.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000756.html');return false;">
          <span class="method-name">attributes</span><span class="method-args">(options = nil)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns a <a href="Base.html#M000764">hash</a> of all the <a
href="Base.html#M000756">attributes</a> with their names as keys and clones
of their objects as values.
</p>
        </div>
      </div>

      <div id="method-M000755" class="method-detail">
        <a name="M000755"></a>

        <div class="method-heading">
          <a href="Base.src/M000755.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000755.html');return false;">
          <span class="method-name">attributes=</span><span class="method-args">(new_attributes)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Allows you to set all the <a href="Base.html#M000756">attributes</a> at
once by passing in a <a href="Base.html#M000764">hash</a> with keys
matching the attribute names (which again matches the column names).
Sensitive <a href="Base.html#M000756">attributes</a> can be protected from
this form of mass-assignment by using the <tt><a
href="Base.html#M000705">attr_protected</a></tt> macro. Or you can
alternatively specify which <a href="Base.html#M000756">attributes</a>
<b>can</b> be accessed in with the <tt><a
href="Base.html#M000706">attr_accessible</a></tt> macro. Then all the <a
href="Base.html#M000756">attributes</a> not included in that won&#8216;t be
allowed to be mass-assigned.
</p>
        </div>
      </div>

      <div id="method-M000757" class="method-detail">
        <a name="M000757"></a>

        <div class="method-heading">
          <a href="Base.src/M000757.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000757.html');return false;">
          <span class="method-name">attributes_before_type_cast</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns a <a href="Base.html#M000764">hash</a> of cloned <a
href="Base.html#M000756">attributes</a> before typecasting and
deserialization.
</p>
        </div>
      </div>

      <div id="method-M000742" class="method-detail">
        <a name="M000742"></a>

        <div class="method-heading">
          <a href="Base.src/M000742.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000742.html');return false;">
          <span class="method-name">clone</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns a <a href="Base.html#M000742">clone</a> of the record that
hasn&#8216;t been assigned an <a href="Base.html#M000735">id</a> yet and is
treated as a <a href="Base.html#M000734">new</a> record. Note that this is
a &quot;shallow&quot; <a href="Base.html#M000742">clone</a>: it copies the
object&#8216;s <a href="Base.html#M000756">attributes</a> only, not its
associations. The extent of a &quot;deep&quot; <a
href="Base.html#M000742">clone</a> is application-specific and is therefore
left to the application to implement according to its need.
</p>
        </div>
      </div>

      <div id="method-M000761" class="method-detail">
        <a name="M000761"></a>

        <div class="method-heading">
          <a href="Base.src/M000761.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000761.html');return false;">
          <span class="method-name">column_for_attribute</span><span class="method-args">(name)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the column object for the named attribute.
</p>
        </div>
      </div>

      <div id="method-M000772" class="method-detail">
        <a name="M000772"></a>

        <div class="method-heading">
          <a href="Base.src/M000772.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000772.html');return false;">
          <span class="method-name">connection</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the <a href="Base.html#M000769">connection</a> currently associated
with the class. This can also be used to &quot;borrow&quot; the <a
href="Base.html#M000769">connection</a> to do database work that
isn&#8216;t easily done without going straight to SQL.
</p>
        </div>
      </div>

      <div id="method-M000748" class="method-detail">
        <a name="M000748"></a>

        <div class="method-heading">
          <a href="Base.src/M000748.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000748.html');return false;">
          <span class="method-name">decrement</span><span class="method-args">(attribute)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Initializes the <tt>attribute</tt> to zero if nil and subtracts one. Only
makes sense for number-based <a href="Base.html#M000756">attributes</a>.
Returns self.
</p>
        </div>
      </div>

      <div id="method-M000749" class="method-detail">
        <a name="M000749"></a>

        <div class="method-heading">
          <a href="Base.src/M000749.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000749.html');return false;">
          <span class="method-name">decrement!</span><span class="method-args">(attribute)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Decrements the <tt>attribute</tt> and saves the record.
</p>
        </div>
      </div>

      <div id="method-M000741" class="method-detail">
        <a name="M000741"></a>

        <div class="method-heading">
          <a href="Base.src/M000741.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000741.html');return false;">
          <span class="method-name">destroy</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Deletes the record in the database and freezes this instance to reflect
that no changes should be made (since they can&#8216;t be persisted).
</p>
        </div>
      </div>

      <div id="method-M000763" class="method-detail">
        <a name="M000763"></a>

        <div class="method-heading">
          <a href="Base.src/M000763.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000763.html');return false;">
          <span class="method-name">eql?</span><span class="method-args">(comparison_object)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Delegates to ==
</p>
        </div>
      </div>

      <div id="method-M000766" class="method-detail">
        <a name="M000766"></a>

        <div class="method-heading">
          <a href="Base.src/M000766.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000766.html');return false;">
          <span class="method-name">freeze</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Just <a href="Base.html#M000766">freeze</a> the <a
href="Base.html#M000756">attributes</a> <a
href="Base.html#M000764">hash</a>, such that associations are still
accessible even on destroyed records.
</p>
        </div>
      </div>

      <div id="method-M000767" class="method-detail">
        <a name="M000767"></a>

        <div class="method-heading">
          <a href="Base.src/M000767.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000767.html');return false;">
          <span class="method-name">frozen?</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
        </div>
      </div>

      <div id="method-M000759" class="method-detail">
        <a name="M000759"></a>

        <div class="method-heading">
          <a href="Base.src/M000759.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000759.html');return false;">
          <span class="method-name">has_attribute?</span><span class="method-args">(attr_name)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns true if the given attribute is in the <a
href="Base.html#M000756">attributes</a> <a
href="Base.html#M000764">hash</a>
</p>
        </div>
      </div>

      <div id="method-M000764" class="method-detail">
        <a name="M000764"></a>

        <div class="method-heading">
          <a href="Base.src/M000764.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000764.html');return false;">
          <span class="method-name">hash</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Delegates to <a href="Base.html#M000735">id</a> in order to allow two
records of the same type and <a href="Base.html#M000735">id</a> to work
with something like:
</p>
<pre>
  [ Person.find(1), Person.find(2), Person.find(3) ] &amp; [ Person.find(1), Person.find(4) ] # =&gt; [ Person.find(1) ]
</pre>
        </div>
      </div>

      <div id="method-M000735" class="method-detail">
        <a name="M000735"></a>

        <div class="method-heading">
          <a href="Base.src/M000735.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000735.html');return false;">
          <span class="method-name">id</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
A model instance&#8216;s primary key is always available as model.id
whether you name it the default &#8216;<a
href="Base.html#M000735">id</a>&#8217; or set it to something else.
</p>
        </div>
      </div>

      <div id="method-M000737" class="method-detail">
        <a name="M000737"></a>

        <div class="method-heading">
          <a href="Base.src/M000737.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000737.html');return false;">
          <span class="method-name">id=</span><span class="method-args">(value)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Sets the primary ID.
</p>
        </div>
      </div>

      <div id="method-M000746" class="method-detail">
        <a name="M000746"></a>

        <div class="method-heading">
          <a href="Base.src/M000746.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000746.html');return false;">
          <span class="method-name">increment</span><span class="method-args">(attribute)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Initializes the <tt>attribute</tt> to zero if nil and adds one. Only makes
sense for number-based <a href="Base.html#M000756">attributes</a>. Returns
self.
</p>
        </div>
      </div>

      <div id="method-M000747" class="method-detail">
        <a name="M000747"></a>

        <div class="method-heading">
          <a href="Base.src/M000747.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000747.html');return false;">
          <span class="method-name">increment!</span><span class="method-args">(attribute)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Increments the <tt>attribute</tt> and saves the record.
</p>
        </div>
      </div>

      <div id="method-M000738" class="method-detail">
        <a name="M000738"></a>

        <div class="method-heading">
          <a href="Base.src/M000738.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000738.html');return false;">
          <span class="method-name">new_record?</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns true if this object hasn&#8216;t been saved yet &#8212; that is, a
record for the object doesn&#8216;t exist yet.
</p>
        </div>
      </div>

      <div id="method-M000768" class="method-detail">
        <a name="M000768"></a>

        <div class="method-heading">
          <a href="Base.src/M000768.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000768.html');return false;">
          <span class="method-name">readonly?</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Records loaded through joins with piggy-back <a
href="Base.html#M000756">attributes</a> will be marked as read only as they
cannot be saved and return true to this query.
</p>
        </div>
      </div>

      <div id="method-M000752" class="method-detail">
        <a name="M000752"></a>

        <div class="method-heading">
          <a href="Base.src/M000752.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000752.html');return false;">
          <span class="method-name">reload</span><span class="method-args">(options = nil)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Reloads the <a href="Base.html#M000756">attributes</a> of this object from
the database. The optional options argument is passed to <a
href="Base.html#M000692">find</a> when reloading so you may do e.g.
record.reload(:lock =&gt; true) to <a href="Base.html#M000752">reload</a>
the same record with an exclusive row lock.
</p>
        </div>
      </div>

      <div id="method-M000765" class="method-detail">
        <a name="M000765"></a>

        <div class="method-heading">
          <a href="Base.src/M000765.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000765.html');return false;">
          <span class="method-name">respond_to?</span><span class="method-args">(method, include_priv = false)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
A Person object with a name attribute can ask
person.respond_to?(&quot;name&quot;),
person.respond_to?(&quot;name=&quot;), and
person.respond_to?(&quot;name?&quot;) which will all return true.
</p>
        </div>
      </div>

      <div id="method-M000739" class="method-detail">
        <a name="M000739"></a>

        <div class="method-heading">
          <a href="Base.src/M000739.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000739.html');return false;">
          <span class="method-name">save</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <ul>
<li>No record exists: Creates a <a href="Base.html#M000734">new</a> record with
values matching those of the object <a
href="Base.html#M000756">attributes</a>.

</li>
<li>A record does exist: Updates the record with values matching those of the
object <a href="Base.html#M000756">attributes</a>.

</li>
</ul>
        </div>
      </div>

      <div id="method-M000740" class="method-detail">
        <a name="M000740"></a>

        <div class="method-heading">
          <a href="Base.src/M000740.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000740.html');return false;">
          <span class="method-name">save!</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Attempts to <a href="Base.html#M000739">save</a> the record, but instead of
just returning false if it couldn&#8216;t happen, it raises a
RecordNotSaved exception
</p>
        </div>
      </div>

      <div id="method-M000736" class="method-detail">
        <a name="M000736"></a>

        <div class="method-heading">
          <a href="Base.src/M000736.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000736.html');return false;">
          <span class="method-name">to_param</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Enables Active Record objects to be used as URL parameters in Action Pack
automatically.
</p>
        </div>
      </div>

      <div id="method-M000750" class="method-detail">
        <a name="M000750"></a>

        <div class="method-heading">
          <a href="Base.src/M000750.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000750.html');return false;">
          <span class="method-name">toggle</span><span class="method-args">(attribute)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Turns an <tt>attribute</tt> that&#8216;s currently true into false and vice
versa. Returns self.
</p>
        </div>
      </div>

      <div id="method-M000751" class="method-detail">
        <a name="M000751"></a>

        <div class="method-heading">
          <a href="Base.src/M000751.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000751.html');return false;">
          <span class="method-name">toggle!</span><span class="method-args">(attribute)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Toggles the <tt>attribute</tt> and saves the record.
</p>
        </div>
      </div>

      <div id="method-M000743" class="method-detail">
        <a name="M000743"></a>

        <div class="method-heading">
          <a href="Base.src/M000743.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000743.html');return false;">
          <span class="method-name">update_attribute</span><span class="method-args">(name, value)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Updates a single attribute and saves the record. This is especially useful
for boolean flags on existing records. Note: This method is overwritten by
the Validation module that&#8216;ll make sure that updates made with this
method doesn&#8216;t get subjected to validation checks. Hence, <a
href="Base.html#M000756">attributes</a> can be updated even if the full
object isn&#8216;t valid.
</p>
        </div>
      </div>

      <div id="method-M000744" class="method-detail">
        <a name="M000744"></a>

        <div class="method-heading">
          <a href="Base.src/M000744.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000744.html');return false;">
          <span class="method-name">update_attributes</span><span class="method-args">(attributes)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Updates all the <a href="Base.html#M000756">attributes</a> from the
passed-in Hash and saves the record. If the object is invalid, the saving
will fail and false will be returned.
</p>
        </div>
      </div>

      <div id="method-M000745" class="method-detail">
        <a name="M000745"></a>

        <div class="method-heading">
          <a href="Base.src/M000745.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M000745.html');return false;">
          <span class="method-name">update_attributes!</span><span class="method-args">(attributes)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Updates an object just like <a
href="Base.html#M000744">Base.update_attributes</a> but calls <a
href="Base.html#M000740">save!</a> instead of <a
href="Base.html#M000739">save</a> so an exception is raised if the record
is invalid.
</p>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>