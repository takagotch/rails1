<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Module: ActionView::Helpers::JavaScriptMacrosHelper</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Module</strong></td>
          <td class="class-name-in-header">ActionView::Helpers::JavaScriptMacrosHelper</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../../../files/lib/action_view/helpers/java_script_macros_helper_rb.html">
                lib/action_view/helpers/java_script_macros_helper.rb
                </a>
        <br />
            </td>
        </tr>

        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <p>
Provides a set of helpers for creating JavaScript macros that rely on and
often bundle methods from <a
href="JavaScriptHelper.html">JavaScriptHelper</a> into larger units. These
macros also rely on counterparts in the controller that provide them with
their backing. The in-place editing relies on
ActionController::Base.in_place_edit_for and the autocompletion relies on
ActionController::Base.auto_complete_for.
</p>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M001132">auto_complete_field</a>&nbsp;&nbsp;
      <a href="#M001133">auto_complete_result</a>&nbsp;&nbsp;
      <a href="#M001130">in_place_editor</a>&nbsp;&nbsp;
      <a href="#M001131">in_place_editor_field</a>&nbsp;&nbsp;
      <a href="#M001134">text_field_with_auto_complete</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">





      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M001132" class="method-detail">
        <a name="M001132"></a>

        <div class="method-heading">
          <a href="JavaScriptMacrosHelper.src/M001132.html" target="Code" class="method-signature"
            onclick="popupCode('JavaScriptMacrosHelper.src/M001132.html');return false;">
          <span class="method-name">auto_complete_field</span><span class="method-args">(field_id, options = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
DEPRECATION WARNING: This method will become a separate plugin when Rails
2.0 ships.
</p>
<p>
Adds AJAX autocomplete functionality to the text input field with the DOM
ID specified by <tt>field_id</tt>.
</p>
<p>
This function expects that the called action returns an HTML &lt;ul&gt;
list, or nothing if no entries should be displayed for autocompletion.
</p>
<p>
You&#8216;ll probably want to turn the browser&#8216;s built-in
autocompletion off, so be sure to include an
<tt>autocomplete=&quot;off&quot;</tt> attribute with your text input field.
</p>
<p>
The autocompleter object is assigned to a Javascript variable named
<tt>field_id</tt>_auto_completer. This object is useful if you for example
want to trigger the auto-complete suggestions through other means than user
input (for that specific case, call the <tt>activate</tt> method on that
object).
</p>
<p>
Required <tt>options</tt> are:
</p>
<table>
<tr><td valign="top"><tt>:url</tt>:</td><td>URL to call for autocompletion results in url_for format.

</td></tr>
</table>
<p>
Addtional <tt>options</tt> are:
</p>
<table>
<tr><td valign="top"><tt>:update</tt>:</td><td>Specifies the DOM ID of the element whose innerHTML should be updated with
the autocomplete entries returned by the AJAX request. Defaults to
<tt>field_id</tt> + &#8216;_auto_complete&#8216;

</td></tr>
<tr><td valign="top"><tt>:with</tt>:</td><td>A JavaScript expression specifying the parameters for the XMLHttpRequest.
This defaults to &#8216;fieldname=value&#8217;.

</td></tr>
<tr><td valign="top"><tt>:frequency</tt>:</td><td>Determines the time to wait after the last keystroke for the AJAX request
to be initiated.

</td></tr>
<tr><td valign="top"><tt>:indicator</tt>:</td><td>Specifies the DOM ID of an element which will be displayed while
autocomplete is running.

</td></tr>
<tr><td valign="top"><tt>:tokens</tt>:</td><td>A string or an array of strings containing separator tokens for tokenized
incremental autocompletion. Example: <tt>:tokens =&gt; &#8217;,&#8217;</tt>
would allow multiple autocompletion entries, separated by commas.

</td></tr>
<tr><td valign="top"><tt>:min_chars</tt>:</td><td>The minimum number of characters that should be in the input field before
an Ajax call is made to the server.

</td></tr>
<tr><td valign="top"><tt>:on_hide</tt>:</td><td>A Javascript expression that is called when the autocompletion div is
hidden. The expression should take two variables: element and update.
Element is a DOM element for the field, update is a DOM element for the div
from which the innerHTML is replaced.

</td></tr>
<tr><td valign="top"><tt>:on_show</tt>:</td><td>Like on_hide, only now the expression is called then the div is shown.

</td></tr>
<tr><td valign="top"><tt>:after_update_element</tt>:</td><td>A Javascript expression that is called when the user has selected one of
the proposed values. The expression should take two variables: element and
value. Element is a DOM element for the field, value is the value selected
by the user.

</td></tr>
<tr><td valign="top"><tt>:select</tt>:</td><td>Pick the class of the element from which the value for insertion should be
extracted. If this is not specified, the entire element is used.

</td></tr>
</table>
        </div>
      </div>

      <div id="method-M001133" class="method-detail">
        <a name="M001133"></a>

        <div class="method-heading">
          <a href="JavaScriptMacrosHelper.src/M001133.html" target="Code" class="method-signature"
            onclick="popupCode('JavaScriptMacrosHelper.src/M001133.html');return false;">
          <span class="method-name">auto_complete_result</span><span class="method-args">(entries, field, phrase = nil)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
DEPRECATION WARNING: This method will become a separate plugin when Rails
2.0 ships.
</p>
<p>
Use this method in your view to generate a return for the AJAX autocomplete
requests.
</p>
<p>
Example action:
</p>
<pre>
  def auto_complete_for_item_title
    @items = Item.find(:all,
      :conditions =&gt; [ 'LOWER(description) LIKE ?',
      '%' + request.raw_post.downcase + '%' ])
    render :inline =&gt; &quot;&lt;%= auto_complete_result(@items, 'description') %&gt;&quot;
  end
</pre>
<p>
The <a href="JavaScriptMacrosHelper.html#M001133">auto_complete_result</a>
can of course also be called from a view belonging to the auto_complete
action if you need to decorate it further.
</p>
        </div>
      </div>

      <div id="method-M001130" class="method-detail">
        <a name="M001130"></a>

        <div class="method-heading">
          <a href="JavaScriptMacrosHelper.src/M001130.html" target="Code" class="method-signature"
            onclick="popupCode('JavaScriptMacrosHelper.src/M001130.html');return false;">
          <span class="method-name">in_place_editor</span><span class="method-args">(field_id, options = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
DEPRECATION WARNING: This method will become a separate plugin when Rails
2.0 ships.
</p>
<p>
Makes an HTML element specified by the DOM ID <tt>field_id</tt> become an
in-place editor of a property.
</p>
<p>
A form is automatically created and displayed when the user clicks the
element, something like this:
</p>
<pre>
  &lt;form id=&quot;myElement-in-place-edit-form&quot; target=&quot;specified url&quot;&gt;
    &lt;input name=&quot;value&quot; text=&quot;The content of myElement&quot;/&gt;
    &lt;input type=&quot;submit&quot; value=&quot;ok&quot;/&gt;
    &lt;a onclick=&quot;javascript to cancel the editing&quot;&gt;cancel&lt;/a&gt;
  &lt;/form&gt;
</pre>
<p>
The form is serialized and sent to the server using an AJAX call, the
action on the server should process the value and return the updated value
in the body of the reponse. The element will automatically be updated with
the changed value (as returned from the server).
</p>
<p>
Required <tt>options</tt> are:
</p>
<table>
<tr><td valign="top"><tt>:url</tt>:</td><td>Specifies the url where the updated value should be sent after the user
presses &quot;ok&quot;.

</td></tr>
</table>
<p>
Addtional <tt>options</tt> are:
</p>
<table>
<tr><td valign="top"><tt>:rows</tt>:</td><td>Number of rows (more than 1 will use a TEXTAREA)

</td></tr>
<tr><td valign="top"><tt>:cols</tt>:</td><td>Number of characters the text input should span (works for both INPUT and
TEXTAREA)

</td></tr>
<tr><td valign="top"><tt>:size</tt>:</td><td>Synonym for :cols when using a single line text input.

</td></tr>
<tr><td valign="top"><tt>:cancel_text</tt>:</td><td>The text on the cancel link. (default: &quot;cancel&quot;)

</td></tr>
<tr><td valign="top"><tt>:save_text</tt>:</td><td>The text on the save link. (default: &quot;ok&quot;)

</td></tr>
<tr><td valign="top"><tt>:loading_text</tt>:</td><td>The text to display while the data is being loaded from the server
(default: &quot;Loading&#8230;&quot;)

</td></tr>
<tr><td valign="top"><tt>:saving_text</tt>:</td><td>The text to display when submitting to the server (default:
&quot;Saving&#8230;&quot;)

</td></tr>
<tr><td valign="top"><tt>:external_control</tt>:</td><td>The id of an external control used to enter edit mode.

</td></tr>
<tr><td valign="top"><tt>:load_text_url</tt>:</td><td>URL where initial value of editor (content) is retrieved.

</td></tr>
<tr><td valign="top"><tt>:options</tt>:</td><td>Pass through options to the AJAX call (see prototype&#8216;s Ajax.Updater)

</td></tr>
<tr><td valign="top"><tt>:with</tt>:</td><td>JavaScript snippet that should return what is to be sent in the AJAX call,
<tt>form</tt> is an implicit parameter

</td></tr>
<tr><td valign="top"><tt>:script</tt>:</td><td>Instructs the in-place editor to evaluate the remote JavaScript response
(default: false)

</td></tr>
</table>
<p>
<tt>:click_to_edit_text</tt>::The text shown during mouseover the editable
text (default: &quot;Click to edit&quot;)
</p>
        </div>
      </div>

      <div id="method-M001131" class="method-detail">
        <a name="M001131"></a>

        <div class="method-heading">
          <a href="JavaScriptMacrosHelper.src/M001131.html" target="Code" class="method-signature"
            onclick="popupCode('JavaScriptMacrosHelper.src/M001131.html');return false;">
          <span class="method-name">in_place_editor_field</span><span class="method-args">(object, method, tag_options = {}, in_place_editor_options = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
DEPRECATION WARNING: This method will become a separate plugin when Rails
2.0 ships.
</p>
<p>
Renders the value of the specified object and method with in-place editing
capabilities.
</p>
<p>
See the RDoc on ActionController::InPlaceEditing to learn more about this.
</p>
        </div>
      </div>

      <div id="method-M001134" class="method-detail">
        <a name="M001134"></a>

        <div class="method-heading">
          <a href="JavaScriptMacrosHelper.src/M001134.html" target="Code" class="method-signature"
            onclick="popupCode('JavaScriptMacrosHelper.src/M001134.html');return false;">
          <span class="method-name">text_field_with_auto_complete</span><span class="method-args">(object, method, tag_options = {}, completion_options = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
DEPRECATION WARNING: This method will become a separate plugin when Rails
2.0 ships.
</p>
<p>
Wrapper for text_field with added AJAX autocompletion functionality.
</p>
<p>
In your controller, you&#8216;ll need to define an action called
auto_complete_for to respond the AJAX calls,
</p>
<p>
See the RDoc on ActionController::Macros::AutoComplete to learn more about
this.
</p>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>