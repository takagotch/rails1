<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: OCI8AutoRecover</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href=".././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Class</strong></td>
          <td class="class-name-in-header">OCI8AutoRecover</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../files/lib/active_record/connection_adapters/oracle_adapter_rb.html">
                lib/active_record/connection_adapters/oracle_adapter.rb
                </a>
        <br />
            </td>
        </tr>

        <tr class="top-aligned-row">
            <td><strong>Parent:</strong></td>
            <td>
                DelegateClass(OCI8)
            </td>
        </tr>
        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <p>
The <a href="OCI8AutoRecover.html">OCI8AutoRecover</a> class enhances the
OCI8 driver with auto-recover and reset functionality. If a call to <a
href="OCI8AutoRecover.html#M000239">exec</a> fails, and autocommit is
turned on (ie., we&#8216;re not in the middle of a longer transaction), it
will automatically reconnect and try again. If autocommit is turned off,
this would be dangerous (as the earlier part of the implied transaction may
have failed silently if the connection died) &#8212; so instead the
connection is marked as dead, to be reconnected on it&#8216;s next use.
</p>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000239">exec</a>&nbsp;&nbsp;
      <a href="#M000236">new</a>&nbsp;&nbsp;
      <a href="#M000237">ping</a>&nbsp;&nbsp;
      <a href="#M000238">reset!</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">


    <div id="constants-list">
      <h3 class="section-bar">Constants</h3>

      <div class="name-list">
        <table summary="Constants">
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">LOST_CONNECTION_ERROR_CODES</td>
          <td>=</td>
          <td class="context-item-value">[ 28, 1012, 3113, 3114 ]</td>
          <td width="3em">&nbsp;</td>
          <td class="context-item-desc">
ORA-00028: your session has been killed ORA-01012: not logged on ORA-03113:
end-of-file on communication channel ORA-03114: not connected to ORACLE

</td>
        </tr>
        </table>
      </div>
    </div>

    <div id="aliases-list">
      <h3 class="section-bar">External Aliases</h3>

      <div class="name-list">
                        <table summary="aliases">
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">active</td>
          <td>-&gt;</td>
          <td class="context-item-value">active?</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">auto_retry</td>
          <td>-&gt;</td>
          <td class="context-item-value">auto_retry?</td>
        </tr>
                        </table>
      </div>
    </div>


    <div id="attribute-list">
      <h3 class="section-bar">Attributes</h3>

      <div class="name-list">
        <table>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">active</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc"></td>
        </tr>
        </table>
      </div>
    </div>
      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Class methods</h3>

      <div id="method-M000236" class="method-detail">
        <a name="M000236"></a>

        <div class="method-heading">
          <a href="OCI8AutoRecover.src/M000236.html" target="Code" class="method-signature"
            onclick="popupCode('OCI8AutoRecover.src/M000236.html');return false;">
          <span class="method-name">new</span><span class="method-args">(config, factory = OracleConnectionFactory.new)</span>
          </a>
        </div>
      
        <div class="method-description">
        </div>
      </div>

      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000239" class="method-detail">
        <a name="M000239"></a>

        <div class="method-heading">
          <a href="OCI8AutoRecover.src/M000239.html" target="Code" class="method-signature"
            onclick="popupCode('OCI8AutoRecover.src/M000239.html');return false;">
          <span class="method-name">exec</span><span class="method-args">(sql, *bindvars, &amp;block)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Adds auto-recovery functionality.
</p>
<p>
See: <a
href="http://www.jiubao.org/ruby-oci8/api.en.html#label-11">www.jiubao.org/ruby-oci8/api.en.html#label-11</a>
</p>
        </div>
      </div>

      <div id="method-M000237" class="method-detail">
        <a name="M000237"></a>

        <div class="method-heading">
          <a href="OCI8AutoRecover.src/M000237.html" target="Code" class="method-signature"
            onclick="popupCode('OCI8AutoRecover.src/M000237.html');return false;">
          <span class="method-name">ping</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Checks connection, returns true if active. Note that <a
href="OCI8AutoRecover.html#M000237">ping</a> actively checks the
connection, while active? simply returns the last known state.
</p>
        </div>
      </div>

      <div id="method-M000238" class="method-detail">
        <a name="M000238"></a>

        <div class="method-heading">
          <a href="OCI8AutoRecover.src/M000238.html" target="Code" class="method-signature"
            onclick="popupCode('OCI8AutoRecover.src/M000238.html');return false;">
          <span class="method-name">reset!</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Resets connection, by logging off and creating a <a
href="OCI8AutoRecover.html#M000236">new</a> connection.
</p>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>